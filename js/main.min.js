"use strict";function makeBackgrounds(e){var t=new Image;t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",t.onload=t.onerror=function(){2===t.height?e.classList.add("webp-true"):e.classList.add("webp-false")}}function initForm(){var o=document.querySelector(".contacts-form"),t=document.querySelector(".alert"),i=t.querySelector(".alert-text"),e=document.querySelector(".alert-exit"),a="contacts-field--error",n="alert--error",r="alert--success",s="alert-show",l="Данные успешно отправлены!",u="Проверьте внимательно поля формы!";function c(e){d(),"error"===e?(i.innerText=u,t.classList.add(n)):"success"===e&&(i.innerText=l,t.classList.add(r)),t.classList.add(s)}function d(){t.classList.remove(s),t.classList.remove(n),t.classList.remove(r),i.innerText="..."}null!=o&&o.addEventListener("submit",function(e){e.preventDefault();(e=o.querySelector("button")).disabled=!0;var i,t=Array.from(o.children),n=(i={},t.forEach(function(e){var t;e.id&&(t=e.id,e=e.value,i[t]=e)}),i);!function(e){var t,i=!0;for(t in e)""===e[t].trim()?(document.getElementById(t).classList.add(a),i=!1):document.getElementById(t).classList.remove(a);return i}(n)?c("error"):(console.log(n),c("success"),t.forEach(function(e){e.id&&(e.value="")})),e.disabled=!1}),e.addEventListener("click",d)}var tabletWidth=767;function headerInit(){var i=document.querySelector(".header"),n=document.querySelector(".hero"),e=90,t=108,o="header-static",a="header-fixed";function r(){return window.innerWidth>=tabletWidth?t:e}function s(e,t){n.style.paddingTop=t,n.style.height=e}function l(e,t){i.classList.remove(t),i.classList.add(e)}function u(e){return i.className.includes(e)}function c(){window.scrollY>r()?u(a)||(s("100vh",r()+"px"),l(a,o)):u(o)||(s(window.innerHeight-r()+"px","0"),l(o,a))}c(),document.addEventListener("scroll",c)}function initMenu(e){var t=document.querySelector(".header-menu"),i=document.querySelector(".header-navigation"),n="header-navigation--show",o="header-link--active",a=document.querySelectorAll("button:not(.navigation-close)"),r=document.querySelectorAll("input"),s=document.querySelectorAll("textarea"),l=document.querySelectorAll("a:not(.header-link)"),u=document.querySelectorAll(".header-link"),c=document.querySelector(".navigation-close");function d(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=-1);for(var n=0;n<e.length;n++)e[n].disabled=t,e[n].tabIndex=i}function m(){null!=i&&i.classList.remove(n),e.style.overflowY="scroll",d(a,!1,1),d(r,!1,1),d(l,!1,1),d(s,!1,1),c.disabled=!0,d(u)}null!=t&&t.addEventListener("click",function(){null!=i&&i.classList.add(n),e.style.overflowY="hidden",d(a),d(r),d(l),d(s),c.disabled=!1,d(u,!1,1)}),null!=i&&i.addEventListener("click",function(e){var t;"NAV"===(e=e.target).tagName||"BUTTON"===e.tagName?m():"A"===e.tagName&&(e=e,t=i.querySelector("."+o),e.className!==t.className&&(t.classList.remove(o),e.classList.add(o)),m())}),window.innerWidth<=tabletWidth&&(d(u),c.disabled=!0),window.addEventListener("resize",function(){"scroll"!==getComputedStyle(e).overflowY&&(null!=i&&i.classList.remove(n),e.style.overflowY="scroll",d(u,!1,1))})}window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("body");initMenu(e),initForm(),makeBackgrounds(e),postsInit(),headerInit()});var posts=[{date:"JAN 4, 2016",theme:"In Culture",title:"POST-3",text:" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam, laudantium nulla velit aliquam doloribus veniam consequatur? Culpa, suscipit dolor aperiam ea voluptatum voluptas doloribus nihil quasi earum quo facere officia? \n  Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti, eveniet!",jpgImg:"img/feat-1.jpg",webpImg:"img/feat-1.webp"},{date:"JAN 4, 2016",theme:"In Culture",title:"POST-4",text:" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam, laudantium nulla velit aliquam doloribus veniam consequatur? Culpa, suscipit dolor aperiam ea voluptatum voluptas doloribus nihil quasi earum quo facere officia? \n  Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti, eveniet!",jpgImg:"img/feat-2.jpg",webpImg:"img/feat-2.webp"},{date:"JAN 4, 2016",theme:"In Culture",title:"POST-5",text:" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam, laudantium nulla velit aliquam doloribus veniam consequatur? Culpa, suscipit dolor aperiam ea voluptatum voluptas doloribus nihil quasi earum quo facere officia? \n  Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti, eveniet!",jpgImg:"img/feat-1.jpg",webpImg:"img/feat-1.webp"},{date:"JAN 4, 2016",theme:"In Culture",title:"POST-6",text:" Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam, laudantium nulla velit aliquam doloribus veniam consequatur? Culpa, suscipit dolor aperiam ea voluptatum voluptas doloribus nihil quasi earum quo facere officia? \n  Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti, eveniet!",jpgImg:"img/feat-2.jpg",webpImg:"img/feat-2.webp"}];function generatePostTemplate(e){var t=e.text.indexOf("\n"),i=e.text.substring(0,t),t=e.text.substring(t,e.text.length-1);return'\n    <div class="features-post post" data-post="post">\n        <div class="post-content">\n            <p class="post-date">\n            <span>'.concat(e.date,"</span><span>").concat(e.theme,'</span>\n            </p>\n            <h4 class="post-title subtitle">').concat(e.title,'</h4>\n            <p class="post-text text">\n            ').concat(i,'\n            </p>\n            <p class="post-text text">\n            ').concat(t,'\n            </p>\n        </div>\n        <div class="post-picture">\n            <picture>\n            <source srcset="').concat(e.webpImg,'" type="image/webp" />\n            <img \n            src="').concat(e.jpgImg,'"\n            alt="').concat(e.title.toLowerCase(),' image!" \n            />\n            </picture>\n        </div>\n    </div>\n    ')}function postCount(){var e=0;return{add:function(){return e+=2},reset:function(){e=0},value:function(){return e}}}function showPosts(e,t){e.insertAdjacentHTML("beforeend",t.map(function(e){return generatePostTemplate(e)}).join(""))}function hidePosts(e){for(var t=document.querySelectorAll("div[data-post]"),i=0;i<t.length;i++)e.removeChild(t[i])}function postsInit(){var t=document.querySelector(".posts-button"),i=document.querySelector(".posts-wrapper"),n=postCount(),o="Скрыть посты";t.addEventListener("click",function(){var e;t.innerText===o?(n.reset(),hidePosts(i),t.innerText="Показать ещё",i.scrollIntoView()):(e=posts.slice(n.value(),n.add()),n.value()>=posts.length&&(t.innerText=o),showPosts(i,e))})}
//# sourceMappingURL=main.min.js.map
